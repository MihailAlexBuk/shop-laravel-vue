<template>
    <div>
        <div class="content-container no-padding">
            <div class="container-full" >
                <div class="main-content" >
                    <div class="row row-fluid mb-10">
                        <div class="col-sm-12">
                            <div class="rev_slider_wrapper fullwidthbanner-container">
                                <div id="rev_slider" class="rev_slider fullwidthabanner">
                                    <ul>
                                        <li data-transition="fade" data-slotamount="default" data-easein="default" data-easeout="default" data-masterspeed="default" data-thumb="" data-rotate="0" data-saveperformance="off" data-title="Slide">

                                            <img src="https://picsum.photos/id/215/1920/656" alt="" width="1920" height="656" data-lazyload="images/slideshow/slider_1920x657.jpg" data-bgposition="center center" data-bgfit="cover" data-bgrepeat="no-repeat" data-bgparallax="off" class="rev-slidebg">

                                            <div class="tp-caption home1-small-black tp-resizeme" data-x="586" data-y="217" data-width="['auto']" data-height="['auto']" data-transform_idle="o:1;" data-transform_in="y:[100%];z:0;rZ:-35deg;sX:1;sY:1;skX:0;skY:0;s:2000;e:Power4.easeInOut;" data-transform_out="y:[100%];rZ:0deg;sX:0.7;sY:0.7;s:1000;e:Power3.easeInOut;s:1000;e:Power3.easeInOut;" data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" data-mask_out="x:0;y:0;s:inherit;e:inherit;" data-start="500" data-splitin="chars" data-splitout="none" data-responsive_offset="on" data-elementdelay="0.05">
                                                the best gadgets 2016
                                            </div>

                                            <div class="tp-caption primary-button rev-btn" data-x="628" data-y="342" data-width="['auto']" data-height="['auto']" data-transform_idle="o:1;" data-transform_hover="o:1;rX:0;rY:0;rZ:0;z:0;s:0;e:Linear.easeNone;" data-style_hover="c:rgba(0, 0, 0, 1.00);bg:rgba(255, 255, 255, 1.00);bs:solid;bw:1px;cursor:pointer;" data-transform_in="y:[100%];z:0;rX:0deg;rY:0;rZ:0;sX:1;sY:1;skX:0;skY:0;opacity:0;s:2000;e:Power2.easeInOut;" data-transform_out="y:[100%];rZ:0deg;sX:0.7;sY:0.7;s:1000;e:Power3.easeInOut;s:1000;e:Power3.easeInOut;" data-mask_in="x:0px;y:[100%];s:inherit;e:inherit;" data-mask_out="x:0;y:0;s:inherit;e:inherit;" data-start="500" data-splitin="none" data-splitout="none" data-responsive_offset="on" data-responsive="off">
                                                shop now
                                            </div>

                                            <div class="tp-caption home1-primary tp-resizeme" data-x="427" data-y="261" data-width="['auto']" data-height="['auto']" data-transform_idle="o:1;" data-transform_in="y:[100%];z:0;rZ:-35deg;sX:1;sY:1;skX:0;skY:0;s:2000;e:Power4.easeInOut;" data-transform_out="y:[100%];rZ:0deg;sX:0.7;sY:0.7;s:1000;e:Power3.easeInOut;s:1000;e:Power3.easeInOut;" data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" data-mask_out="x:0;y:0;s:inherit;e:inherit;" data-start="500" data-splitin="chars" data-splitout="none" data-responsive_offset="on" data-elementdelay="0.05">
                                                changed is everything.
                                            </div>

                                        </li>

                                        <li data-transition="fade" data-slotamount="default" data-easein="default" data-easeout="default" data-masterspeed="default" data-thumb="" data-rotate="0" data-saveperformance="off" data-title="Slide">

                                            <img src="https://picsum.photos/id/623/1920/656" alt="" data-lazyload="images/slideshow/slider_1920x657.jpg" data-bgposition="center center" data-bgfit="cover" data-bgrepeat="no-repeat" data-bgparallax="off" class="rev-slidebg">

                                            <div class="tp-caption home1-small-black tp-resizeme" data-x="610" data-y="183" data-width="['auto']" data-height="['auto']" data-transform_idle="o:1;" data-transform_in="z:0;rX:0;rY:0;rZ:0;sX:0.8;sY:0.8;skX:0;skY:0;opacity:0;s:1500;e:Power4.easeOut;" data-transform_out="y:[100%];rZ:0deg;sX:0.7;sY:0.7;s:1000;e:Power3.easeInOut;s:1000;e:Power3.easeInOut;" data-mask_out="x:0;y:0;s:inherit;e:inherit;" data-start="500" data-splitin="none" data-splitout="none" data-responsive_offset="on">
                                                the best products 2015
                                            </div>

                                            <div class="tp-caption primary-button rev-btn" data-x="610" data-y="402" data-width="['auto']" data-height="['auto']" data-transform_idle="o:1;" data-transform_hover="o:1;rX:0;rY:0;rZ:0;z:0;s:0;e:Linear.easeNone;" data-style_hover="c:rgba(0, 0, 0, 1.00);bg:rgba(255, 255, 255, 1.00);bs:solid;bw:1px;cursor:pointer;" data-transform_in="z:0;rX:0;rY:0;rZ:0;sX:0.8;sY:0.8;skX:0;skY:0;opacity:0;s:1500;e:Power4.easeOut;" data-transform_out="y:[100%];rZ:0deg;sX:0.7;sY:0.7;s:1000;e:Power3.easeInOut;s:1000;e:Power3.easeInOut;" data-mask_out="x:0;y:0;s:inherit;e:inherit;" data-start="500" data-splitin="none" data-splitout="none" data-responsive_offset="on" data-responsive="off">
                                                shop now
                                            </div>

                                            <div class="tp-caption home1-primary tp-resizeme" data-x="610" data-y="227" data-width="['auto']" data-height="['auto']" data-transform_idle="o:1;" data-transform_in="z:0;rX:0;rY:0;rZ:0;sX:0.8;sY:0.8;skX:0;skY:0;opacity:0;s:1500;e:Power4.easeOut;" data-transform_out="y:[100%];rZ:0deg;sX:0.7;sY:0.7;s:1000;e:Power3.easeInOut;s:1000;e:Power3.easeInOut;" data-mask_out="x:0;y:0;s:inherit;e:inherit;" data-start="500" data-splitin="none" data-splitout="none" data-responsive_offset="on">
                                                Built-in speakerphone
                                            </div>

                                            <div class="tp-caption home3-small-black tp-resizeme" data-x="610" data-y="296" data-width="['auto']" data-height="['auto']" data-transform_idle="o:1;" data-transform_in="z:0;rX:0;rY:0;rZ:0;sX:0.8;sY:0.8;skX:0;skY:0;opacity:0;s:1500;e:Power4.easeOut;" data-transform_out="y:[100%];rZ:0deg;sX:0.7;sY:0.7;s:1000;e:Power3.easeInOut;s:1000;e:Power3.easeInOut;" data-mask_out="x:0;y:0;s:inherit;e:inherit;" data-start="500" data-splitin="none" data-splitout="none" data-responsive_offset="on">
                                                Suscipit aliquam lorem ornare consectetur integer urna<br> fermentum venenatis, molestie a non phasellus feugiat curae nam<br> orci convallis
                                            </div>
                                        </li>
                                    </ul>
                                    <div class="tp-bannertimer tp-bottom"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container" v-if="getHomeProducts">
                        <h3 class="heading-center-custom text-center">
                            top raiting
                        </h3>
                        <div class="row row-fluid" >
                            <div class="col-sm-4" v-for="product in getHomeProducts.top_3">
                                <div class="align_center wpb_animate_when_almost_visible wpb_left-to-right mb-3">
                                    <router-link :to="{name: 'product', params:{id: product.id}}">
                                        <div class="box_border_grey">
                                            <img width="336" height="342" :src="product.image_url_1" alt="featured_img_1"/>
                                        </div>
                                    </router-link>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container-full" v-if="getHomeProducts">
                        <div class="row row-fluid hot-trend" v-for="product in getHomeProducts.best_disc">
                            <div class="col-sm-6 pt-5 pb-5">
                                <div class="mb-0 mt-7 text-uppercase">
                                    <p class="text-center">
                                        best offer of this month
                                    </p>
                                </div>
                                <h3 class="text-uppercase text-center mb-3">
                                    hot trends sales
                                </h3>
                                <p class="text-center mb-5">
                                    Get Discount {{product.discount}}% for {{product.title}}
                                </p>

                                <router-link :to="{name: 'product', params:{id: product.id}}" class="btn btn-default-outline btn-outline btn-align-center rounded">
                                    <span>shop now</span>
                                </router-link>
                            </div>
                            <div class="col-sm-6 hidden-xs">
                                <div class="align_center">
                                    <div class="box_border_grey">
                                        <img width="368" height="521" :src="product.image_url_1" alt="home3_img_1"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container" v-if="getHomeProducts">
                        <div class="row row-fluid mb-5">
                            <div class="col-sm-12">
                                <h3 class="heading-center-custom text-center">
                                    best selling
                                </h3>
                                <div class="post-grid-wrap">
                                    <ul class="row grid col-3">
                                        <li class="col-sm-4 " v-for="product in getHomeProducts.best_selling">
                                            <article class="hentry">
                                                <div class="hentry-wrap">
                                                    <div class="entry-featured">
                                                        <router-link :to="{name: 'product', params: {id: product.id}}">
                                                            <img style="width: 500px; height: 400px;" :src="product.image_url_1"/>
                                                        </router-link>
                                                    </div>
                                                    <div class="entry-info">
                                                        <div class="entry-header">
                                                            <h3 class="entry-title">
                                                                <router-link :to="{name: 'product', params: {id: product.id}}">
                                                                    {{product.title}}
                                                                </router-link>
                                                            </h3>
                                                        </div>
                                                        <div class="entry-content">
                                                            <p v-html="product.desc">
                                                            </p>
                                                        </div>
                                                        <div class="entry-meta">
                                                            <span class="meta-category">
                                                                Category:
                                                                {{product.category.title}}
                                                            </span>

                                                            <span v-if="product.discount > 0" class="meta-category">
                                                                Discount:
                                                                {{product.discount}}%
                                                            </span>
                                                            <span class="meta-category">
                                                                Price:
                                                                {{product.price}}$
                                                            </span>
                                                        </div>
                                                        <div class="meta-author">
                                                            Raiting:
                                                            <span v-for="rating in product.rating_value">
                                                                    <i class="fa fa-star checked"></i>
                                                                </span>
                                                            <span v-if="product.rating_value < 5">
                                                                    <span v-for="i in (5 - product.rating_value)">
                                                                        <i class="fa fa-star"></i>
                                                                    </span>
                                                                </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </article>
                                        </li>

                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</template>

<script>
    import {mapGetters} from 'vuex'

    export default{
        name: "Home",

        computed:{
            ...mapGetters(['getHomeProducts', 'user'])
        },


        mounted() {
            this.update()
            this.loadSlider();
        },

        methods:{
            update(){
                this.$store.dispatch('getHomePageProducts')
                if(this.user){
                    this.$store.dispatch('getCart')
                }
            },






            loadSlider(){
                let tpj=jQuery;
                let revapi7;
                tpj(document).ready(function() {
                    if(tpj("#rev_slider").revolution === undefined){
                        revslider_showDoubleJqueryError("#rev_slider");
                    }else{
                        revapi7 = tpj("#rev_slider").show().revolution({
                            sliderType:"standard",
                            sliderLayout:"fullwidth",
                            dottedOverlay:"none",
                            delay:9000,
                            navigation: {
                                keyboardNavigation:"off",
                                keyboard_direction: "horizontal",
                                mouseScrollNavigation:"off",
                                onHoverStop:"on",
                                touch:{
                                    touchenabled:"on",
                                    swipe_threshold: 75,
                                    swipe_min_touches: 50,
                                    swipe_direction: "horizontal",
                                    drag_block_vertical: false
                                }
                                ,
                                arrows: {
                                    style:"gyges",
                                    enable:true,
                                    hide_onmobile:true,
                                    hide_under:600,
                                    hide_onleave:true,
                                    hide_delay:200,
                                    hide_delay_mobile:1200,
                                    tmp:'',
                                    left: {
                                        h_align:"left",
                                        v_align:"center",
                                        h_offset:30,
                                        v_offset:0
                                    },
                                    right: {
                                        h_align:"right",
                                        v_align:"center",
                                        h_offset:30,
                                        v_offset:0
                                    }
                                }
                                ,
                                bullets: {
                                    enable:true,
                                    hide_onmobile:true,
                                    hide_under:600,
                                    style:"hephaistos",
                                    hide_onleave:true,
                                    hide_delay:200,
                                    hide_delay_mobile:1200,
                                    direction:"horizontal",
                                    h_align:"center",
                                    v_align:"bottom",
                                    h_offset:0,
                                    v_offset:30,
                                    space:5,
                                    tmp:''
                                }
                            },
                            gridwidth:1170,
                            gridheight:600,
                            lazyType:"smart",
                            parallax: {
                                type:"mouse",
                                origo:"slidercenter",
                                speed:10000,
                                levels:[2,3,4,5,6,7,12,16,10,50],
                            },
                            shadow:0,
                            spinner:"off",
                            stopLoop:"off",
                            stopAfterLoops:-1,
                            stopAtSlide:-1,
                            shuffle:"off",
                            autoHeight:"off",
                            disableProgressBar:"on",
                            hideThumbsOnMobile:"off",
                            hideSliderAtLimit:0,
                            hideCaptionAtLimit:0,
                            hideAllCaptionAtLilmit:0,
                            startWithSlide:0,
                            debugMode:false,
                            fallbacks: {
                                simplifyAll:"off",
                                nextSlideOnWindowFocus:"off",
                                disableFocusListener:false,
                            }
                        });
                    }
                });	/*ready*/
            }
        }
    }


</script>
<style scoped>
    .checked{
        color: #ffe400;
    }
</style>
